[{"/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/index.js":"1","/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/reportWebVitals.js":"2","/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/App.js":"3","/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/components/indoorTemp.js":"4","/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/components/humidity.js":"5","/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/components/thermostatSwitch.js":"6"},{"size":500,"mtime":1611268493880,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1611268493884,"results":"9","hashOfConfig":"8"},{"size":1938,"mtime":1611467587628,"results":"10","hashOfConfig":"8"},{"size":3136,"mtime":1611466202681,"results":"11","hashOfConfig":"8"},{"size":2302,"mtime":1611466323311,"results":"12","hashOfConfig":"8"},{"size":6189,"mtime":1611465337951,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1e91ecb",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"16"},"/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/index.js",[],["28","29"],"/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/reportWebVitals.js",[],"/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/App.js",["30","31","32","33"],"/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/components/indoorTemp.js",[],"/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/components/humidity.js",[],"/Users/winniehcy/take-home-challenges-all/parity-dashboard-assignment/src/components/thermostatSwitch.js",["34","35"],"import { useEffect, useState } from \"react\";\n\nfunction ThermostatSwitch () {\n    const [ thermostatON, setThermostatON ] = useState(false);\n    const [ autoON, setAutoON ] = useState(false);  //only checked with heating and cooling to represent states\n    const [ heatON, setHeatON ] = useState(false);\n    const [ coolON, setCoolON ] = useState(false);\n\n    const uid = localStorage.getItem('uid');\n    const thermostatUrl = `https://api-staging.paritygo.com/sensors/api/thermostat/${uid}/`;\n\n    useEffect(() => {\n        getStatus();\n    }, []);\n\n    const handleThermostat = async () => {\n        //send request to persist\n        if(!newStatus) {\n            await changeStatus('off');\n        } else {\n            await changeStatus('auto_standby');\n        }\n\n        //update component states\n        const newStatus = !thermostatON;\n        setThermostatON(newStatus);\n\n        \n    }\n\n    const handleAuto = () => {\n        const newStatus = !autoON;\n        setAutoON(newStatus);\n\n        // should first check temperature diffs (between indoor and outdoor), then assign a param and persist that data\n\n        //\n    }\n\n    const handleHeat = async () => {\n        //persist changes\n\n        // if heat turns on, auto turns off\n        // if heat turns off, if auto is on then let auto function handle it\n        // if auto is off then turn thermostat off\n        // await changeStatus('heat');\n\n        //change component states\n        const newStatus = !heatON;\n\n        if (newStatus && coolON) {\n            setCoolON(false);\n        }\n        setHeatON(newStatus);\n\n        \n    }\n\n    const handleCool = async () => {\n        //persist changes\n        await changeStatus('cool');\n\n        //change component states\n        const newStatus = !coolON;\n\n        if (newStatus && heatON) {\n            setHeatON(false);\n        }\n        setCoolON(newStatus);\n    }\n\n    // The patch request doesn't change persistent data@!!!\n    const changeStatus = async (newState) => {\n        console.log(newState, \"this is new state\");\n        await fetch(thermostatUrl, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify( { \"state\": newState } ),\n          }).then(response => response.json())\n          .then(data => {\n              console.log('New status', data);\n              \n              console.log(data.state);\n          }).catch(error => {\n            console.error('Error:', error);\n          });\n    }\n\n    const getStatus = async () => {\n\n        await fetch(thermostatUrl, {\n          method: 'GET',\n        }).then(response => response.json())\n        .then(data => {\n            console.log('Init Status:', data);\n            // initialize states by \"switch\" block to save states separately\n            switch(data.state) {\n                case \"off\":\n                    setThermostatON(false);\n                    setAutoON(false);\n                    setHeatON(false);\n                    setCoolON(false);\n                    break;\n                case \"heat\":\n                    setThermostatON(true);\n                    setAutoON(false);\n                    setHeatON(true);\n                    setCoolON(false);\n                    break;\n                case \"cool\":\n                    setThermostatON(true);\n                    setAutoON(false);\n                    setHeatON(false);\n                    setCoolON(true);\n                    break;\n                case \"auto_heat\":\n                    setThermostatON(true);\n                    setAutoON(true);\n                    setHeatON(true);\n                    setCoolON(false);\n                    break;\n                case \"auto_cool\":\n                    setThermostatON(true);\n                    setAutoON(true);\n                    setHeatON(false);\n                    setCoolON(true);\n                    break;\n                case \"auto_standby\":\n                    setThermostatON(true);\n                    setAutoON(true);\n                    setHeatON(false);\n                    setCoolON(false);\n                    break;\n                default:\n                    console.error(\"Something's not right\");\n            }\n\n\n            console.log(data.state, \"new status\");\n\n        }).catch(error => {\n          console.error('Error:', error);\n        });\n    }\n\n    const renderAuto = () => {\n        const displayColor = autoON ? \"#16bcc8\" : \"#BCBCBC\";\n        return (<h4 style={{color:`${displayColor}`}}>AUTO</h4>);\n    }\n\n    const renderHeat = () => {\n        const displayColor = heatON ? \"#16bcc8\" : \"#BCBCBC\";\n        return (<h4 style={{color:`${displayColor}`}}>HEAT</h4>);\n    }\n\n    const renderCool = () => {\n        const displayColor = coolON ? \"#16bcc8\" : \"#BCBCBC\";\n        return (<h4 style={{color:`${displayColor}`}}>COOL</h4>);\n    }\n\n    const handleSwitch = async (tempState) => {\n        console.log(tempState, 'tempstate');\n        // get tempstate from user input, \n        switch(tempState) {\n            case \"heat\":\n                console.log(\"it's heat\");\n                await handleHeat();\n                break;\n            case \"cool\":\n                await handleCool();\n                break;\n            case \"thermostat\":\n                await handleThermostat();\n                break;\n            case \"auto\":\n                await handleAuto();\n                break;\n            default:\n                console.error(\"Something's not right\");\n        }\n\n        // getStatus();\n    }\n\n    return (\n        <div className=\"container-center\">\n            <div className=\"switches\">\n                <button onClick={() => handleSwitch(\"thermostat\")}>{thermostatON ? <h4>OFF</h4> : <h4>ON</h4> }</button>\n                <button onClick={() => handleSwitch(\"auto\")}>{renderAuto()}</button>\n                <div className=\"inline-switches\">\n                    <button onClick={() => handleSwitch(\"heat\")}>{renderHeat()}</button>/\n                    <button onClick={() => handleSwitch(\"cool\")}>{renderCool()}</button>\n                </div>\n\n            </div>\n        </div>\n        \n    );\n};\n\n\nexport default ThermostatSwitch;\n",{"ruleId":"36","replacedBy":"37"},{"ruleId":"38","replacedBy":"39"},{"ruleId":"40","severity":1,"message":"41","line":4,"column":8,"nodeType":"42","messageId":"43","endLine":4,"endColumn":16},{"ruleId":"40","severity":1,"message":"44","line":8,"column":11,"nodeType":"42","messageId":"43","endLine":8,"endColumn":25},{"ruleId":"40","severity":1,"message":"45","line":10,"column":11,"nodeType":"42","messageId":"43","endLine":10,"endColumn":24},{"ruleId":"40","severity":1,"message":"46","line":12,"column":11,"nodeType":"42","messageId":"43","endLine":12,"endColumn":27},{"ruleId":"47","severity":1,"message":"48","line":14,"column":8,"nodeType":"49","endLine":14,"endColumn":10,"suggestions":"50"},{"ruleId":"51","severity":1,"message":"52","line":18,"column":13,"nodeType":"42","messageId":"53","endLine":18,"endColumn":22},"no-native-reassign",["54"],"no-negated-in-lhs",["55"],"no-unused-vars","'Humidity' is defined but never used.","Identifier","unusedVar","'humiditySensor' is assigned a value but never used.","'outdoorSensor' is assigned a value but never used.","'thermostatStatus' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getStatus'. Either include it or remove the dependency array.","ArrayExpression",["56"],"no-use-before-define","'newStatus' was used before it was defined.","usedBeforeDefined","no-global-assign","no-unsafe-negation",{"desc":"57","fix":"58"},"Update the dependencies array to be: [getStatus]",{"range":"59","text":"60"},[544,546],"[getStatus]"]